<?php

function karsazcashback_add_menu()
{
    $karsazcashback_icon_base64 = 'PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMjAiCiAgIGhlaWdodD0iMjAiCiAgIHZpZXdCb3g9IjAgMCA1LjI5MTY2NjggNS4yOTE2NjY0IgogICB2ZXJzaW9uPSIxLjEiCiAgIGlkPSJzdmc4NjEiCiAgIGlua3NjYXBlOnZlcnNpb249IjEuMSAoY2U2NjYzYjNiNywgMjAyMS0wNS0yNSkiCiAgIHNvZGlwb2RpOmRvY25hbWU9ImthcnNhemNhc2hiYWNrX2ljb24uc3ZnIgogICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9Ii9ob21lL2FsaXJlemEvRG93bmxvYWRzL2JpdG1kZnNhcC5wbmciCiAgIGlua3NjYXBlOmV4cG9ydC14ZHBpPSI5NiIKICAgaW5rc2NhcGU6ZXhwb3J0LXlkcGk9Ijk2IgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0ibmFtZWR2aWV3ODYzIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMSIKICAgICBpbmtzY2FwZTpwYWdlY2hlY2tlcmJvYXJkPSIwIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBzaG93Z3JpZD0iZmFsc2UiCiAgICAgdW5pdHM9InB4IgogICAgIGlua3NjYXBlOnpvb209IjE2IgogICAgIGlua3NjYXBlOmN4PSIxMy44NDM3NSIKICAgICBpbmtzY2FwZTpjeT0iMTEuMjE4NzUiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEwMTYiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjI3IgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHdpZHRoPSI1MDBweCIgLz4KICA8ZGVmcwogICAgIGlkPSJkZWZzODU4IiAvPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBpZD0icGF0aDIzMDctOSIKICAgICAgIHN0eWxlPSJmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MS44NTE3NiIKICAgICAgIGQ9Ik0gMy4zMjI3OTk0LDAuMDU2MTk0MDEgQyAyLjk3ODkwOTQsMC4wMzA0NzcxNiAyLjY3Nzk1MTYsMC4zMjU3NTI4MiAyLjYyMTUzOTMsMC42NTIxNzQ3MiAyLjU2MjE5LDAuOTA0Njk0NTMgMi42Njc5NzMyLDEuMTc4OTUzNSAyLjg3MTkxMzYsMS4zMzYzMDkxIDMuMTQ4NTM2LDEuNTc3MzMwNSAzLjU5NjI3NTcsMS41MTUwNDM2IDMuODQ1ODI2MSwxLjI2NDQxNzUgNC4xMTkzNTgzLDEuMDA0MjI3NCA0LjEwMDUzNjQsMC41MjY0MDMxNCAzLjgzMTU4MDEsMC4yNjk5OTg0NCAzLjY5OTA1MTYsMC4xMzU3NjI0NyAzLjUxMzA1MjUsMC4wNTA2MjgxMyAzLjMyMjc5OTQsMC4wNTYxOTQwMSBaIG0gMCwwLjQxNDIzODY3IEMgMy41NTU3OTA3LDAuNDU2ODE3MzQgMy43MTg0NTgyLDAuNzY2MjY0MzggMy41NzAwNzc4LDAuOTQ5MTIzNDcgMy40NTk3NTExLDEuMTA4MzYzNiAzLjE5MzAzOCwxLjEyMjI2NjMgMy4wODA2ODQ5LDAuOTU3NTAyODIgMi45NjMxNzQ4LDAuODA0NzkyOTEgMy4wMjY4Njg5LDAuNTQ3MTAwMiAzLjIxNzkyNSwwLjQ4OTA3MzYzIDMuMjUxNDA2OSwwLjQ3NjcxODQ3IDMuMjg3MDg5NywwLjQ3MDE5NzI1IDMuMzIyNzk5NCwwLjQ3MDQzMjY4IFogTSAxLjI0MDg2MDUsMS4yMTAyNTk2IEMgMC44OTY5MTE0MywxLjE4NDU0NzQgMC41OTU5NDc3OCwxLjQ3OTkxNzQgMC41Mzk1NTYyMywxLjgwNjM4ODEgMC40ODAyMDM5NSwyLjA1ODYxNzYgMC41ODU3ODMyNSwyLjMzMTkyOTIgMC43ODgzNjM1NSwyLjQ5MDE2MDkgMS4wNTUxMTI0LDIuNzI3ODE0MyAxLjQ5MDEzMzcsMi42NzgwMjEgMS43NDEzMjA4LDIuNDQxNjY1NyAyLjAyNjcxNiwyLjE4ODcwNjcgMi4wMjk3MDE0LDEuNjk5ODUwOSAxLjc1OTY3NzUsMS40MzQyNjQ1IDEuNjI2Njc5OCwxLjI5Mzg4NTIgMS40MzU5MDkzLDEuMjA0NDYyNCAxLjI0MDg2MDUsMS4yMTAyNTk2IFogTSAzLjk0MjgxNDIsMS41MTMyODI0IEMgMy40MTQxMTQ4LDEuNTE3OTI2NiAyLjkxODg4ODIsMS45MDM5MDMgMi43NzY2NDAzLDIuNDExNzk1MyAyLjY5MTcyNDIsMi42NDQxNDggMi42MDcxNDk0LDIuODc2NjI1MyAyLjUyMjI2MDIsMy4xMDg5ODc5IDIuMTgyMzM3NiwyLjk5NTY0MDEgMS44NTUwMjI5LDIuODQwNTc1NSAxLjUwNDM1MzMsMi43NjIwMzY2IDAuOTQwNTE0MTgsMi42Njg3ODE1IDAuMzM3NjYwMjksMy4wMTkwNTAxIDAuMTUwMDEwNTUsMy41NjEyMzQ5IC0wLjAzMjQ4MjksNC4wNDgwNDI2IDAuMTI0MTI3MDcsNC42NDMzMzg1IDAuNTM4Nzg5MzksNC45NjI1NDA0IDAuOTI1MDk3MTEsNS4yNzQwNDIyIDEuNTAyNTE0OCw1LjMyOTE0ODcgMS45MzE3ODAzLDUuMDczMTE4MSAyLjIyNzU5NjEsNC45MDU3MTM5IDIuNDQyNzUwNiw0LjYxMzkxNzEgMi41MzI4MTE2LDQuMjg3ODcxOCAyLjYxMTY3NTYsNC4wNzE4NTI1IDIuNjkwNTUyNywzLjg1NTgzOCAyLjc2OTQwNjYsMy42Mzk4MTUgMy4xMDk3MTkyLDMuNzUzMjE0NSAzLjQzNzMzMzcsMy45MDg3MTYyIDMuNzg4NDk5MSwzLjk4NjkwOTMgNC4zNTc2MDg3LDQuMDgwMzc4OSA0Ljk2NTQ4NjksMy43MjE4NTkgNS4xNDczNDMzLDMuMTcxOTM4MSA1LjMyMzI2NywyLjY4MzEyMzUgNS4xNTg5ODM2LDIuMDkwMTc0MSA0Ljc0MDIzODUsMS43NzcwMTAyIDQuNTE0OTE3NywxLjYwMTg5MiA0LjIyODgxOTksMS41MDM0OTQ4IDMuOTQyODE0MiwxLjUxMzI4MjQgWiBNIDEuMjQwODYwNSwxLjYyNDQ5ODMgQyAxLjQ2NTE4NzUsMS42MTMwNTU2IDEuNjI5NDk4LDEuOTAwNTk3OCAxLjQ5OTUxMDQsMi4wODY1NDc5IDEuMzk4OTE0LDIuMjUzODk5NiAxLjEzMDkzNzEsMi4yODQzODk1IDEuMDA4NTg3NiwyLjEyNDY3NTQgMC44NzkzNjg5MiwxLjk3NDA4NTUgMC45MzgyNDc1OSwxLjcwMjc3MjkgMS4xMzU4MzEyLDEuNjQzNTE0NiBjIDAuMDMzNTczLC0wLjAxMjI5NyAwLjA2OTI3LC0wLjAxODgwOSAwLjEwNTAyOTMsLTAuMDE5MDE2IHogTSAzLjk1MzAyMjMsMS45Mjc1MjExIEMgNC4zOTk1Mzc0LDEuOTAzOTk5MyA0LjgxNDk2NzgsMi4zMDQ5MzI2IDQuODA0NjA2OCwyLjc1Mjc5NjUgNC44MDg5NzA2LDMuMTU0NDI1NiA0LjQ4ODIyMjEsMy41MzYwMjU5IDQuMDg0NTE2MSwzLjU3ODgxMDcgMy44NTAxNDAxLDMuNjEyNzQyNyAzLjYyNzM4OTEsMy41MTc5MjkyIDMuNDE0NDA4NCwzLjQzNDUzNzIgMy4yNDY2ODg2LDMuMzczMjk5MyAzLjA3ODk2NzksMy4zMTIwNjM4IDIuOTExMjQ3MSwzLjI1MDgyODQgMy4wMzI2NTQxLDIuOTQxNzE0OSAzLjEyMjc0NDYsMi42MTkzOTAxIDMuMjY4NTczMywyLjMyMDQ2NjIgMy40MTIwMjQyLDIuMDg2NDUyMyAzLjY3ODMzMDEsMS45MzI2MDU2IDMuOTUzMDIyMywxLjkyNzUyMTEgWiBNIDEuMzE2NjE2MiwzLjE2MzI1MjQgYyAwLjI3ODMwMjcsMC4wMDgwNCAwLjUyNTIzMjQsMC4xNTIzMDc4IDAuNzg1ODQ0MSwwLjIzMzI0NjQgMC4wOTI2NTMsMC4wMzM4MjYgMC4xODUzMDUxLDAuMDY3NjUxIDAuMjc3OTU3NywwLjEwMTQ3NjYgQyAyLjI1NDE0MTgsMy44MTUzMjg1IDIuMTY2Mjc5NSw0LjE0OTU2MDIgMi4wMDgwNzMzLDQuNDUzMTkyNCAxLjc3NjcyODYsNC44MTIxNjczIDEuMjQ5NTkzNyw0LjkzNDM2ODggMC44ODc3NDg2Myw0LjcwMjk4NyAwLjU0NTcwNTQ0LDQuNDk4ODMyMSAwLjM4NjY3NzI5LDQuMDMyNDQ5NSAwLjU1NDAwODcyLDMuNjY2NTc1OSAwLjY4MTE4NjksMy4zNzAzNDkzIDAuOTkxNzAzNjQsMy4xNTcwODAzIDEuMzE2NjE2MiwzLjE2MzI1MjQgWiIKICAgICAgIGZpbGw9IiMwMDAwMDAiIC8+CiAgPC9nPgo8L3N2Zz4K';
    $karsazcashback_menu_main = add_menu_page(
        KARSAZCASHBACK_LANGUAGES['admin_menu_main_page_title'],
        KARSAZCASHBACK_LANGUAGES['admin_menu_main_menu_title'],
        'manage_options',
        'karsazcashback_main',
        'karsazcashback_main_page',
        'data:image/svg+xml;base64,' . $karsazcashback_icon_base64
    );

    add_action("load-{$karsazcashback_menu_main}", 'karsazcashback_load_styles_and_scripts');
}

function karsazcashback_load_styles_and_scripts()
{
    wp_enqueue_style(
        'karsazcashback-admin-style',
        KARSAZCASHBACK_CSS_URL . 'karsazcashback-admin-style.css',
        []
    );
    wp_enqueue_script(
        'karsazcashback-admin-script',
        KARSAZCASHBACK_JS_URL . 'karsazcashback-admin-script.js',
        ['jquery'],
        false,
        true
    );
    wp_localize_script(
        'karsazcashback-admin-script',
        'ajax_object',
        ['ajax_url' => admin_url('admin-ajax.php')]
    );
}

add_action('admin_menu', 'karsazcashback_add_menu');
